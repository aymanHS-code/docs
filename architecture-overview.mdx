---
title: "Architecture Overview"
description: "Understanding how Roomi's microservices architecture works together"
---

## Roomi Platform Architecture

Roomi is built on a modern microservices architecture that provides scalability, reliability, and flexibility. Each service has a specific responsibility and communicates with others through well-defined APIs.

## Service Architecture

![Conversational AI Architecture](/images/Conversational%20AI%20Architecture.svg)

## Core Services

### AI Service - The Brain
**Purpose**: Central intelligence that orchestrates all other services

**Key Responsibilities**:
- Natural language processing and understanding
- Service orchestration and coordination
- Context management and conversation flow
- Background task management
- Voice synthesis and processing

**Communication Pattern**:
```
User Command → AI Service → Handler Service → Target Service → Response
```

**Base URL**: `https://ai-{environment}-{region}.roomi-services.com/v1/`

### Devices Service - Smart Device Abstraction
**Purpose**: Universal interface for controlling any smart home device

**Key Responsibilities**:
- Multi-provider device support (Philips Hue, SmartThings, Tuya, etc.)
- Protocol translation and abstraction
- Device discovery and management
- Room and floor organization
- Real-time device status monitoring

**Communication Pattern**:
```
AI Service → Handler Service → Devices Service → Smart Device Provider → Device
```

**Base URL**: `https://devices-{environment}-{region}.roomi-services.com/v1/`

### Handler Service - System Communication Hub
**Purpose**: Database operations and inter-service communication

**Key Responsibilities**:
- Database CRUD operations
- Message routing between services
- Event handling and distribution
- Service discovery and health monitoring
- Configuration management
- Audit logging

**Communication Pattern**:
```
Service A → Handler Service → Service B
```

**Base URL**: `https://handler-{environment}-{region}.roomi-services.com/v1/`

## Support Services

### Auth Service - Private Authentication
**Purpose**: Invite-only authentication and user management

**Key Responsibilities**:
- Invitation-based user registration
- OTP and UAE Pass authentication
- Session management and token handling
- Permission and role management
- User profile management

**Base URL**: `https://auth-{environment}-{region}.roomi-services.com/v1/`

### Logger Service - CloudWatch Integration
**Purpose**: Centralized logging and monitoring

**Key Responsibilities**:
- Structured logging to CloudWatch
- Performance monitoring and metrics
- Error tracking and aggregation
- Audit trail management
- System health monitoring

**Base URL**: `https://logger-{environment}-{region}.roomi-services.com/v1/`

### Services Platform - Third-Party Integration
**Purpose**: External API and third-party service management

**Key Responsibilities**:
- Events and community management
- Complaints and maintenance requests
- Payment processing and billing
- Facility booking and management
- Automation routines
- Email notifications

**Base URL**: `https://services-{environment}-{region}.roomi-services.com/v1/`

## Service Communication Flow

### 1. User Authentication Flow
```
User → Auth Service → Handler Service → Database
     ↓
Auth Service → Logger Service → CloudWatch
```

### 2. Device Control Flow
```
User Command → AI Service → Handler Service → Devices Service → Smart Device
     ↓
AI Service → Logger Service → CloudWatch
```

### 3. Payment Processing Flow
```
User Request → AI Service → Handler Service → Services Platform → Payment Gateway
     ↓
Services Platform → Logger Service → CloudWatch
     ↓
Services Platform → Email Service → User Notification
```

### 4. Event Management Flow
```
User Request → AI Service → Handler Service → Services Platform → Event System
     ↓
Services Platform → Email Service → Event Notifications
     ↓
Services Platform → Logger Service → CloudWatch
```

## Data Flow Architecture

### Request Flow
1. **User Input**: User provides command or request
2. **AI Processing**: AI service interprets and plans actions
3. **Handler Coordination**: Handler routes requests to appropriate services
4. **Service Execution**: Target service performs the requested action
5. **Response**: Results are returned through the same path
6. **Logging**: All actions are logged for monitoring and audit

### Event-Driven Architecture
- **Event Publishing**: Services publish events for system-wide awareness
- **Event Subscription**: Services subscribe to relevant events
- **Event Processing**: Handler service manages event distribution
- **Event Logging**: All events are logged for audit and debugging

## Security Architecture

### Authentication
- **AWS SigV4**: All API calls require AWS Signature Version 4
- **Service Headers**: Additional `x-unit-id` and `x-user-id` headers
- **Token Management**: JWT tokens for user sessions
- **Permission System**: Role-based access control

### Data Protection
- **Encryption**: All data encrypted in transit and at rest
- **Audit Trail**: Complete audit logging of all operations
- **Access Control**: Granular permissions per service and operation
- **Rate Limiting**: Service-specific rate limiting to prevent abuse

## Scalability Architecture

### Horizontal Scaling
- **Load Balancing**: Each service can scale horizontally
- **Auto-scaling**: Automatic scaling based on demand
- **Service Discovery**: Dynamic service discovery and routing
- **Health Checks**: Continuous health monitoring and failover

### Performance Optimization
- **Caching**: Intelligent caching at multiple levels
- **Connection Pooling**: Optimized database connections
- **Batch Operations**: Batch processing for efficiency
- **Async Processing**: Background task processing

## Monitoring and Observability

### Health Monitoring
- **Service Health**: Each service provides health endpoints
- **Dependency Health**: Monitor dependencies and third-party services
- **Performance Metrics**: Real-time performance monitoring
- **Error Tracking**: Comprehensive error tracking and alerting

### Logging Strategy
- **Structured Logging**: JSON-formatted logs with consistent schema
- **Log Levels**: Debug, Info, Warn, Error, and Fatal levels
- **Context Enrichment**: Automatic addition of metadata
- **Centralized Storage**: All logs stored in CloudWatch

## Deployment Architecture

### Environment Strategy
- **Development**: Local development environment
- **Staging**: Pre-production testing environment
- **Production**: Live production environment

### Infrastructure
- **AWS Cloud**: All services deployed on AWS
- **Region**: Primary region in me-central-1 (UAE)
- **CDN**: Global content delivery for static assets
- **Backup**: Automated backup and disaster recovery

## Integration Patterns

### Internal Service Integration
- **Synchronous**: Direct API calls for immediate responses
- **Asynchronous**: Event-driven communication for background tasks
- **Batch Processing**: Bulk operations for efficiency
- **Error Handling**: Graceful error handling and retry logic

### External Service Integration
- **API Abstraction**: Unified interface for third-party services
- **Data Transformation**: Consistent data models across providers
- **Error Handling**: Provider-specific error handling
- **Rate Limiting**: Provider-aware rate limiting

## Best Practices

### Service Design
- **Single Responsibility**: Each service has a clear, focused purpose
- **Loose Coupling**: Services communicate through well-defined APIs
- **High Cohesion**: Related functionality grouped together
- **Stateless Design**: Services are stateless for scalability

### Communication
- **RESTful APIs**: Standard REST API design
- **JSON Data**: Consistent JSON data format
- **Error Handling**: Comprehensive error handling
- **Versioning**: API versioning for backward compatibility

### Security
- **Authentication**: Strong authentication for all services
- **Authorization**: Fine-grained permission control
- **Audit Logging**: Complete audit trail
- **Data Protection**: Encryption and data protection

## Next Steps

- [AI Service API](/api-reference/ai) - Learn about the AI service
- [Devices Service API](/api-reference/devices) - Understand device control
- [Handler Service API](/api-reference/handler) - Database and communication
- [Auth Service API](/api-reference/auth) - Authentication system
- [Logger Service API](/api-reference/logger) - Logging and monitoring
- [Services Platform API](/api-reference/services) - Third-party integrations 