---
title: "AI Assistant API"
description: "Complete API reference for Roomi AI Assistant and Task Management"
---

## Overview

The Roomi AI Assistant API provides intelligent conversational AI capabilities for smart home interaction. This API enables natural language processing, task management, and background task monitoring for seamless user experiences.

## Base URL

```
https://ai-{env}-ae.roomi-services.com
```

## Authentication

All API endpoints require AWS Signature Version 4 (SigV4) authentication with the following headers:

```http
Authorization: AWS4-HMAC-SHA256 Credential=YOUR_ACCESS_KEY/20240115/me-central-1/execute-api/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=YOUR_SIGNATURE
X-Amz-Content-Sha256: SHA256_HASH_OF_REQUEST_BODY
X-Amz-Date: 20240115T120000Z
```

## API Endpoints

### Health Check

<Endpoint method="GET" path="/health" />

Check the health status of the Roomi AI API.

### AI Assistant

<Endpoint method="POST" path="/roomi" />

Process messages using the Roomi AI assistant for natural language interaction.

### Task Management

<Endpoint method="GET" path="/task/{task_id}/status" />

Check the status of background tasks and monitor their progress.

### Platform Information

<Endpoint method="GET" path="/platform" />

Get platform information including architecture and optimization details.

### Webhooks

<Endpoint method="POST" path="/elevenlabs/webhook" />

Handle ElevenLabs webhook notifications for voice synthesis.

## Core Features

### Natural Language Processing

The AI assistant understands and processes natural language commands for:

- **Device Control**: "Turn on the living room lights"
- **Information Queries**: "What's the temperature in the bedroom?"
- **Routine Management**: "Set up a morning routine"
- **General Assistance**: "What can you help me with?"

### Background Task Management

The API supports long-running tasks with status monitoring:

- **Task Creation**: Submit tasks for processing
- **Status Tracking**: Monitor task progress in real-time
- **Result Retrieval**: Get task results when completed

### Voice Integration

Integration with ElevenLabs for voice synthesis:

- **Text-to-Speech**: Convert AI responses to natural speech
- **Voice Customization**: Support for multiple voices and languages
- **Webhook Processing**: Handle voice synthesis callbacks

## Request/Response Formats

### AI Assistant Request

```json
{
  "user_id": "user-123",
  "unit_id": "unit-456",
  "unit_name": "Apartment 101",
  "transcript": "Turn on the living room lights",
  "thread_id": "e0f5308e-0bd9-4dc9-b55d-5c74798283bf"
}
```

### AI Assistant Response

```json
{
  "response": "I've turned on the living room lights for you.",
  "background_tasks": [],
  "query_type": "DEVICE_CONTROL",
  "query_types": ["DEVICE_CONTROL"],
  "transcript_parts": ["Turn on the living room lights"]
}
```

### Task Status Response

```json
{
  "status": "completed",
  "message": "Task completed successfully",
  "error": null
}
```

## Query Types

The AI assistant can handle various types of queries:

| Query Type | Description | Example |
|------------|-------------|---------|
| `GENERAL` | General conversation and assistance | "Hello, how are you?" |
| `DEVICE_CONTROL` | Smart home device control | "Turn off the kitchen lights" |
| `INFORMATION` | Information requests | "What's the weather like?" |
| `ROUTINE` | Routine management | "Create a bedtime routine" |
| `PAYMENT` | Payment and billing queries | "Show me my recent bills" |
| `COMPLAINT` | Complaint and maintenance | "Report a maintenance issue" |

## SDK Integration

### JavaScript/TypeScript

```javascript
import { RoomiSDK } from '@roomi/sdk';

const roomi = new RoomiSDK({
  region: 'me-central-1',
  accessKeyId: process.env.AWS_ACCESS_KEY_ID,
  secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,
  unitId: 'unit-12345',
  userId: 'user-67890'
});

// Process AI message
const response = await roomi.ai.processMessage({
  user_id: 'user-123',
  unit_id: 'unit-456',
  unit_name: 'Apartment 101',
  transcript: 'Turn on the living room lights'
});

// Check task status
const taskStatus = await roomi.ai.getTaskStatus('task-123');
```

### Python

```python
from roomi_sdk import RoomiSDK

roomi = RoomiSDK(
    region='me-central-1',
    access_key_id=os.getenv('AWS_ACCESS_KEY_ID'),
    secret_access_key=os.getenv('AWS_SECRET_ACCESS_KEY'),
    unit_id='unit-12345',
    user_id='user-67890'
)

# Process AI message
response = await roomi.ai.process_message(
    user_id='user-123',
    unit_id='unit-456',
    unit_name='Apartment 101',
    transcript='Turn on the living room lights'
)

# Check task status
task_status = await roomi.ai.get_task_status('task-123')
```

## Error Handling

### Common Error Responses

| Error Code | Description | Solution |
|------------|-------------|----------|
| `400` | Bad Request | Check request format and required fields |
| `401` | Unauthorized | Verify AWS credentials and signature |
| `422` | Validation Error | Validate request parameters |
| `500` | Internal Server Error | Contact support if persistent |

### Error Response Format

```json
{
  "detail": [
    {
      "loc": ["body", "transcript"],
      "msg": "field required",
      "type": "value_error.missing"
    }
  ]
}
```

## Rate Limiting

The AI API implements rate limiting to ensure optimal performance:

- **Message Processing**: 100 requests per minute per user
- **Task Status Checks**: 1000 requests per minute per user
- **Health Checks**: 100 requests per minute per IP

## Best Practices

1. **Thread Management**: Use consistent thread IDs for conversation continuity
2. **Error Handling**: Implement proper error handling for all API calls
3. **Task Monitoring**: Regularly check task status for long-running operations
4. **Rate Limiting**: Respect API rate limits and implement backoff strategies
5. **Voice Integration**: Handle webhook notifications for voice synthesis

## Next Steps

- [AI Assistant Endpoints](/api-reference/ai/assistant) - Detailed AI assistant API documentation
- [Task Management](/api-reference/ai/tasks) - Background task management
- [Integration Guide](/guides/ai-assistant-setup) - Set up AI assistant integration 