---
title: "Authentication API"
description: "Complete API reference for Roomi Authentication and User Management"
---

## Overview

The Roomi Authentication API provides comprehensive user authentication, management, and authorization services. This API handles OTP verification, UAE Pass integration, user registration, and device management.

## Base URL

```
https://auth-{env}-ae.roomi-services.com
```

## Authentication

All API endpoints require AWS Signature Version 4 (SigV4) authentication with the following headers:

```http
Authorization: AWS4-HMAC-SHA256 Credential=YOUR_ACCESS_KEY/20240115/me-central-1/execute-api/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=YOUR_SIGNATURE
X-Amz-Content-Sha256: SHA256_HASH_OF_REQUEST_BODY
X-Amz-Date: 20240115T120000Z
x-unit-id: unit-12345
x-user-id: user-67890
```

## API Endpoints

### Health Check

<Endpoint method="GET" path="/api/health" />

Check if the authentication server is running and responsive.

### Authentication

<Endpoint method="POST" path="/api/send-otp" />

Send OTP to user's phone number for verification.

<Endpoint method="POST" path="/api/resend-otp" />

Resend OTP using the PIN ID from a previous request.

<Endpoint method="POST" path="/api/validate-otp" />

Validate OTP and authenticate user.

<Endpoint method="POST" path="/api/uaepass/login" />

Authenticate user using UAE Pass digital identity.

<Endpoint method="POST" path="/api/generate-livekit-token" />

Generate LiveKit token for video/audio calling.

### User Management

<Endpoint method="GET" path="/api/me" />

Get current authenticated user information.

<Endpoint method="GET" path="/api/user/{user_id}" />

Get user information by user ID.

<Endpoint method="POST" path="/api/user" />

Create a new user in the system.

<Endpoint method="PUT" path="/api/user" />

Update existing user information.

<Endpoint method="DELETE" path="/api/user/{user_id}" />

Delete user by user ID.

<Endpoint method="GET" path="/api/users/unit" />

Get all users belonging to a specific unit.

<Endpoint method="POST" path="/api/register" />

Register user for the system.

<Endpoint method="POST" path="/api/unregister" />

Unregister user from the system.

### Device Management

<Endpoint method="GET" path="/api/user/{user_id}/devices" />

Get all devices for a specific user.

<Endpoint method="POST" path="/api/user/devices" />

Add device to user subscription for notifications.

### Onboarding

<Endpoint method="POST" path="/api/onboarding/user-data" />

Fetch user data by unit name for onboarding process.

## Response Formats

### Success Response

```json
{
  "status": "success",
  "data": {
    // Response data
  }
}
```

### Error Response

```json
{
  "error": "Error message describing what went wrong"
}
```

## Common HTTP Status Codes

| Status Code | Description |
|-------------|-------------|
| `200` | OK - Request successful |
| `201` | Created - Resource created successfully |
| `400` | Bad Request - Invalid request data |
| `401` | Unauthorized - Authentication required |
| `403` | Forbidden - Access denied |
| `404` | Not Found - Resource not found |
| `500` | Internal Server Error - Server error |

## Rate Limiting

The authentication API implements rate limiting to ensure fair usage:

- **OTP Requests**: 5 requests per phone number per hour
- **API Calls**: 1000 requests per minute per unit
- **User Operations**: 100 operations per minute per user

## SDK Integration

### JavaScript/TypeScript

```javascript
import { RoomiSDK } from '@roomi/sdk';

const roomi = new RoomiSDK({
  region: 'me-central-1',
  accessKeyId: process.env.AWS_ACCESS_KEY_ID,
  secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,
  unitId: 'unit-12345',
  userId: 'user-67890'
});

// Send OTP
const otpResponse = await roomi.auth.sendOTP({
  phone: '+971501234567',
  unit_id: 'unit-123'
});

// Validate OTP
const authResponse = await roomi.auth.validateOTP({
  phone: '+971501234567',
  otp: '123456',
  pin: 'pin-123'
});
```

### Python

```python
from roomi_sdk import RoomiSDK

roomi = RoomiSDK(
    region='me-central-1',
    access_key_id=os.getenv('AWS_ACCESS_KEY_ID'),
    secret_access_key=os.getenv('AWS_SECRET_ACCESS_KEY'),
    unit_id='unit-12345',
    user_id='user-67890'
)

# Send OTP
otp_response = await roomi.auth.send_otp(
    phone='+971501234567',
    unit_id='unit-123'
)

# Validate OTP
auth_response = await roomi.auth.validate_otp(
    phone='+971501234567',
    otp='123456',
    pin='pin-123'
)
```

## Next Steps

- [Authentication Endpoints](/api-reference/auth/authentication) - Detailed authentication API documentation
- [User Management](/api-reference/auth/user-management) - User CRUD operations
- [Onboarding](/api-reference/auth/onboarding) - User onboarding processes 