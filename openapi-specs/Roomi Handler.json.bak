{"openapi":"3.1.0","info":{"title":"Roomi Handler","description":"API for managing Roomi users and devices","version":"1.0.0","x-aws-sigv4-info":"AWS SigV4 Authentication: Requests must include Authorization header with AWS4-HMAC-SHA256 signature, X-Amz-Content-Sha256 header with request body hash, and X-Amz-Date header with ISO8601 timestamp. Region: me-central-1, Service: execute-api"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/users":{"get":{"tags":["Users"],"summary":"Get Users","description":"Get all users with their units","operationId":"get_users_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserWithUnits"},"type":"array","title":"Response Get Users Users Get"}}}}}},"post":{"tags":["Users"],"summary":"Create User","description":"Create a new user","operationId":"create_user_users_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}":{"get":{"tags":["Users"],"summary":"Get User","description":"Get a user and their associated units","operationId":"get_user_users__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user to fetch","title":"User Id"},"description":"The ID of the user to fetch"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithUnits"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Users"],"summary":"Update User","description":"Update a user's data","operationId":"update_user_users__user_id__patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user to update","title":"User Id"},"description":"The ID of the user to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate","description":"The user data to update"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Users"],"summary":"Delete User Endpoint","description":"Delete a user and all their unit relationships","operationId":"delete_user_endpoint_users__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user to delete","title":"User Id"},"description":"The ID of the user to delete"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/units":{"post":{"tags":["Units"],"summary":"Create Unit","description":"Create a new unit","operationId":"create_unit_units_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnitCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnitBase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/units/{unit_id}":{"patch":{"tags":["Units"],"summary":"Update Unit","description":"Update a unit's data","operationId":"update_unit_units__unit_id__patch","parameters":[{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the unit to update","title":"Unit Id"},"description":"The ID of the unit to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnitUpdate","description":"The unit data to update"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnitBase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Units"],"summary":"Get Unit","description":"Get a unit and its associated users","operationId":"get_unit_units__unit_id__get","parameters":[{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the unit to fetch","title":"Unit Id"},"description":"The ID of the unit to fetch"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnitWithUsers"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Units"],"summary":"Delete Unit Endpoint","description":"Delete a unit and all its user relationships","operationId":"delete_unit_endpoint_units__unit_id__delete","parameters":[{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the unit to delete","title":"Unit Id"},"description":"The ID of the unit to delete"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/units/{unit_id}/users":{"get":{"tags":["Units"],"summary":"Get Unit Users Endpoint","description":"Get all users associated with a unit","operationId":"get_unit_users_endpoint_units__unit_id__users_get","parameters":[{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the unit to get users for","title":"Unit Id"},"description":"The ID of the unit to get users for"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserUnitBase"},"title":"Response Get Unit Users Endpoint Units  Unit Id  Users Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/units/{unit_id}/admin":{"get":{"tags":["Units"],"summary":"Get Unit Admin Endpoint","description":"Check if a unit has an admin/owner and return admin info if exists","operationId":"get_unit_admin_endpoint_units__unit_id__admin_get","parameters":[{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the unit to check for admin","title":"Unit Id"},"description":"The ID of the unit to check for admin"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Unit Admin Endpoint Units  Unit Id  Admin Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user-units":{"post":{"tags":["User-Units"],"summary":"Create User Unit","description":"Create a new user-unit relationship","operationId":"create_user_unit_user_units_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUnitCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUnitBase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user-units/{user_id}/{unit_id}":{"patch":{"tags":["User-Units"],"summary":"Update User Unit","description":"Update a user-unit relationship","operationId":"update_user_unit_user_units__user_id___unit_id__patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","title":"Unit Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUnitUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUnitBase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["User-Units"],"summary":"Delete User Unit Endpoint","description":"Delete a user-unit relationship","operationId":"delete_user_unit_endpoint_user_units__user_id___unit_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user","title":"User Id"},"description":"The ID of the user"},{"name":"unit_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the unit","title":"Unit Id"},"description":"The ID of the unit"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user-units/{user_id}":{"get":{"tags":["User-Units"],"summary":"Get User Units Endpoint","description":"Get all units associated with a user","operationId":"get_user_units_endpoint_user_units__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user to get units for","title":"User Id"},"description":"The ID of the user to get units for"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserUnitBase"},"title":"Response Get User Units Endpoint User Units  User Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/lifesmart/use-device":{"post":{"tags":["LifeSmart"],"summary":"Use Device","description":"Control a LifeSmart device","operationId":"use_device_lifesmart_use_device_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDevice"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LifeSmartDeviceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/lifesmart/unlock-door":{"post":{"tags":["LifeSmart"],"summary":"Unlock Door","description":"Unlock a lifesmart door","operationId":"unlock_door_lifesmart_unlock_door_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDoorUnlock"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LifeSmartDeviceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/lifesmart/users/{user_id}/devices":{"get":{"tags":["LifeSmart"],"summary":"Get User Devices","description":"Get all LifeSmart devices for a user","operationId":"get_user_devices_lifesmart_users__user_id__devices_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user to fetch devices for","title":"User Id"},"description":"The ID of the user to fetch devices for"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LifeSmartDevice"},"title":"Response Get User Devices Lifesmart Users  User Id  Devices Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{field_type}/{value}":{"get":{"tags":["Users"],"summary":"Get User By Field","description":"Find users by any identifier field","operationId":"get_user_by_field_users__field_type___value__get","parameters":[{"name":"field_type","in":"path","required":true,"schema":{"type":"string","description":"The type of field to search by (phone, email, username, unit_id, lifesmart_id)","title":"Field Type"},"description":"The type of field to search by (phone, email, username, unit_id, lifesmart_id)"},{"name":"value","in":"path","required":true,"schema":{"type":"string","description":"The value to search for","title":"Value"},"description":"The value to search for"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/UserResponse"},{"$ref":"#/components/schemas/UserWithUnits"}]},"title":"Response Get User By Field Users  Field Type   Value  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/lifesmart/users/{user_id}/devices/formatted":{"get":{"tags":["LifeSmart"],"summary":"Get User Formatted Devices","description":"Get all LifeSmart devices for a user formatted to the required schema","operationId":"get_user_formatted_devices_lifesmart_users__user_id__devices_formatted_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the user to fetch formatted devices for","title":"User Id"},"description":"The ID of the user to fetch formatted devices for"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/LifeSmartFormattedDevice"}},{"$ref":"#/components/schemas/MultipleUnitsDevicesResponse"}],"title":"Response Get User Formatted Devices Lifesmart Users  User Id  Devices Formatted Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AccessType":{"type":"string","enum":["member","admin","childmember","guest","tenant"],"title":"AccessType","description":"Enum for access type in DynamoDB"},"DeleteResponse":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"DeleteResponse","description":"Standard response model for delete operations"},"Devices":{"properties":{"user_request":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Request","default":"device action","example":"turn off kitchen AC"},"agt":{"type":"string","title":"Agt","example":"AzUAAGD5gQEAABhhHwz__w"},"me":{"type":"string","title":"Me","example":"0001"},"devtype":{"type":"string","title":"Devtype","example":"SL_NATURE"},"type":{"type":"string","title":"Type","example":"0x88"},"idx":{"type":"string","title":"Idx","example":"P8"},"tag":{"type":"string","title":"Tag","default":"m","example":"m"},"val":{"anyOf":[{"type":"string"},{"type":"integer"}],"title":"Val","example":"24"}},"type":"object","required":["agt","me","devtype","type","idx","val"],"title":"Devices"},"DoorUnlock":{"properties":{"user_request":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Request","default":"device action","example":"turn off kitchen AC"},"agt":{"type":"string","title":"Agt","example":"AzUAAGD5gQEAABhhHwz__w"},"me":{"type":"string","title":"Me","example":"0001"},"idx":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idx","example":"P8"}},"type":"object","required":["agt","me"],"title":"DoorUnlock"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status of the health check"},"message":{"type":"string","title":"Message","description":"Message from the health check"}},"type":"object","required":["status","message"],"title":"HealthResponse"},"LifeSmartDevice":{"properties":{"name":{"type":"string","title":"Name"},"agt":{"type":"string","title":"Agt"},"stat":{"type":"integer","title":"Stat"},"agt_ver":{"type":"string","title":"Agt Ver"},"me":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Me"},"unit_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit Id"},"unit_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit Name"},"rfic":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rfic"},"tmzone":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tmzone"},"ver":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ver"},"fullCls":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fullcls"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"},"lHeart":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lheart"},"devtype":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Devtype"},"lDbm":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Ldbm"},"eps":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Eps"},"tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tag"}},"additionalProperties":true,"type":"object","required":["name","agt","stat","agt_ver"],"title":"LifeSmartDevice","description":"Model for a single LifeSmart device or agent"},"LifeSmartDeviceResponse":{"properties":{"response":{"title":"Response"},"body":{"anyOf":[{"additionalProperties":true,"type":"object"},{"$ref":"#/components/schemas/UserDevice"},{"$ref":"#/components/schemas/UserDoorUnlock"}],"title":"Body"}},"type":"object","required":["response","body"],"title":"LifeSmartDeviceResponse","description":"Response model for LifeSmart device control operations"},"LifeSmartFormattedDevice":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"unitId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unitid"},"room":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Room"},"brand":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Brand"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"currentValue":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"title":"Currentvalue"},"maxValue":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"title":"Maxvalue"},"minValue":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"title":"Minvalue"},"incDecValue":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"title":"Incdecvalue"},"attributes":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Attributes"},"actions":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Actions"},"modes":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Modes"},"colors":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Colors"},"wind":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Wind"},"activeModes":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Activemodes"},"activeFan":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Activefan"},"activeColors":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Activecolors"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tag"}},"additionalProperties":true,"type":"object","title":"LifeSmartFormattedDevice","description":"Model for a formatted LifeSmart device"},"MultipleUnitsDevicesResponse":{"properties":{"units":{"items":{"$ref":"#/components/schemas/UnitWithDevices"},"type":"array","title":"Units"}},"type":"object","required":["units"],"title":"MultipleUnitsDevicesResponse","description":"Response model for multiple units with devices"},"UnitBase":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"unit_id":{"type":"string","title":"Unit Id"},"unit_name":{"type":"string","title":"Unit Name"},"lifesmart_id":{"type":"string","title":"Lifesmart Id"},"lifesmart_pass":{"type":"string","title":"Lifesmart Pass"},"lifesmart_usertoken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifesmart Usertoken"},"lifesmart_usertoken_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lifesmart Usertoken Expiry"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["unit_id","unit_name","lifesmart_id","lifesmart_pass"],"title":"UnitBase","description":"Base model for unit data"},"UnitCreate":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"unit_id":{"type":"string","title":"Unit Id"},"unit_name":{"type":"string","title":"Unit Name"},"lifesmart_id":{"type":"string","title":"Lifesmart Id"},"lifesmart_pass":{"type":"string","title":"Lifesmart Pass"},"lifesmart_usertoken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifesmart Usertoken"},"lifesmart_usertoken_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lifesmart Usertoken Expiry"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"additionalProperties":true,"type":"object","required":["unit_id","unit_name","lifesmart_id","lifesmart_pass"],"title":"UnitCreate","description":"Model for creating a new unit with minimal required fields"},"UnitUpdate":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"unit_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit Name"},"lifesmart_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifesmart Id"},"lifesmart_pass":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifesmart Pass"},"lifesmart_usertoken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifesmart Usertoken"},"lifesmart_usertoken_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lifesmart Usertoken Expiry"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"additionalProperties":true,"type":"object","title":"UnitUpdate","description":"Model for updating unit data"},"UnitWithDevices":{"properties":{"unit_id":{"type":"string","title":"Unit Id"},"unit_name":{"type":"string","title":"Unit Name"},"devices":{"items":{"$ref":"#/components/schemas/LifeSmartFormattedDevice"},"type":"array","title":"Devices"}},"type":"object","required":["unit_id","unit_name","devices"],"title":"UnitWithDevices","description":"Model for a unit with its devices"},"UnitWithUsers":{"properties":{"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"},"unit_id":{"type":"string","title":"Unit Id"},"unit_name":{"type":"string","title":"Unit Name"},"lifesmart_id":{"type":"string","title":"Lifesmart Id"},"lifesmart_pass":{"type":"string","title":"Lifesmart Pass"},"lifesmart_usertoken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifesmart Usertoken"},"lifesmart_usertoken_expiry":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lifesmart Usertoken Expiry"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"users":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Users"}},"type":"object","required":["unit_id","unit_name","lifesmart_id","lifesmart_pass"],"title":"UnitWithUsers","description":"Model for unit responses including associated users"},"UserCreate":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"user_id":{"type":"string","title":"User Id"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"is_registered":{"type":"boolean","title":"Is Registered","default":false},"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"},"accessible_devices":{"items":{},"type":"array","title":"Accessible Devices"},"user_type":{"$ref":"#/components/schemas/UserType","default":"member"}},"type":"object","required":["user_id"],"title":"UserCreate","description":"Model for creating a new user with minimal required fields"},"UserDevice":{"properties":{"user_id":{"type":"string","title":"User Id","example":"user1"},"unit_id":{"type":"string","title":"Unit Id","example":"a0L4K000008UDoJUAW"},"data":{"additionalProperties":{"items":{"$ref":"#/components/schemas/Devices"},"type":"array"},"type":"object","title":"Data","example":{"devices":[{"agt":"AzUAAGD5gQEAABhhHwz__w","devtype":"SL_NATURE","idx":"P8","me":"0001","tag":"m","type":"0x88","user_request":"turn off kitchen AC","val":"24"}]}}},"type":"object","required":["user_id","unit_id","data"],"title":"UserDevice"},"UserDoorUnlock":{"properties":{"user_id":{"type":"string","title":"User Id","example":"user1"},"unit_id":{"type":"string","title":"Unit Id","example":"a0L4K000008UDoJUAW"},"data":{"additionalProperties":{"items":{"$ref":"#/components/schemas/DoorUnlock"},"type":"array"},"type":"object","title":"Data","example":{"devices":[{"agt":"AzUAAGD5gQEAABhhHwz__w","idx":"P8","me":"0001","user_request":"unlock door"}]}}},"type":"object","required":["user_id","unit_id","data"],"title":"UserDoorUnlock"},"UserResponse":{"properties":{"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"},"user_id":{"type":"string","title":"User Id"},"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"},"is_registered":{"type":"boolean","title":"Is Registered","default":false},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"},"accessible_devices":{"items":{},"type":"array","title":"Accessible Devices"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"user_type":{"$ref":"#/components/schemas/UserType","default":"member"}},"type":"object","required":["user_id"],"title":"UserResponse","description":"Model for user responses"},"UserType":{"type":"string","enum":["owner","tenant","member","guest"],"title":"UserType","description":"Enum for user type in DynamoDB"},"UserUnitBase":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"PK":{"type":"string","title":"Pk"},"GSI1PK":{"type":"string","title":"Gsi1Pk"},"access_type":{"$ref":"#/components/schemas/AccessType"},"user_type":{"$ref":"#/components/schemas/UserType"},"unit_id":{"type":"string","title":"Unit Id"},"user_id":{"type":"string","title":"User Id"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["PK","GSI1PK","access_type","user_type","unit_id","user_id"],"title":"UserUnitBase","description":"Base model for user-unit relationship"},"UserUnitCreate":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"user_id":{"type":"string","title":"User Id"},"unit_id":{"type":"string","title":"Unit Id"},"access_type":{"$ref":"#/components/schemas/AccessType"},"user_type":{"$ref":"#/components/schemas/UserType"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["user_id","unit_id","access_type","user_type"],"title":"UserUnitCreate","description":"Model for creating a new user-unit relationship"},"UserUnitUpdate":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"access_type":{"anyOf":[{"$ref":"#/components/schemas/AccessType"},{"type":"null"}]},"user_type":{"anyOf":[{"$ref":"#/components/schemas/UserType"},{"type":"null"}]},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"additionalProperties":true,"type":"object","title":"UserUnitUpdate","description":"Model for updating user-unit relationship"},"UserUpdate":{"properties":{"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"is_registered":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Registered"},"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"},"accessible_devices":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Accessible Devices"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"user_type":{"anyOf":[{"$ref":"#/components/schemas/UserType"},{"type":"null"}]}},"additionalProperties":true,"type":"object","title":"UserUpdate","description":"Model for updating user data"},"UserWithUnits":{"properties":{"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"},"user_id":{"type":"string","title":"User Id"},"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"},"is_registered":{"type":"boolean","title":"Is Registered","default":false},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"},"accessible_devices":{"items":{},"type":"array","title":"Accessible Devices"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"user_type":{"$ref":"#/components/schemas/UserType","default":"member"},"units":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Units"}},"type":"object","required":["user_id"],"title":"UserWithUnits","description":"Model for user responses including associated units"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"AWSSignatureV4":{"type":"apiKey","in":"header","name":"Authorization","description":"AWS Signature Version 4 authorization header (e.g., AWS4-HMAC-SHA256 Credential=...)"},"AWSContentSha256":{"type":"apiKey","in":"header","name":"X-Amz-Content-Sha256","description":"SHA256 hash of the request body"},"AWSDate":{"type":"apiKey","in":"header","name":"X-Amz-Date","description":"ISO8601 timestamp for the request (e.g., 20230101T120000Z)"}}},"security":[{"AWSSignatureV4":[],"AWSContentSha256":[],"AWSDate":[]}]}